/*
 * libfastcal - Fast calibration data access
 *
 * Copyright (c) 2013-2014 FOXEL SA - http://foxel.ch
 * Please read <http://foxel.ch/license> for more information.
 *
 *
 * Author(s):
 *
 *      Nils Hamel <n.hamel@foxel.ch>
 *
 *
 * This file is part of the FOXEL project <http://foxel.ch>.
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 *
 * Additional Terms:
 *
 *      You are required to preserve legal notices and author attributions in
 *      that material or in the Appropriate Legal Notices displayed by works
 *      containing it.
 *
 *      You are required to attribute the work as explained in the "Usage and
 *      Attribution" section of <http://foxel.ch/license>.
 */


/*
    Source - Includes
 */

    # include "fastcal-eyesis4pi.h"

/*
    Source - Eyesis4pi calibration data
 */

    lf_Real_t lf_eyesis4pi( const char const * lfEyesis4pi, lf_Size_t lfIndex, const char const * lfData, lf_Size_t lfChannel ) {

        /* Calibration data variables - Focal length */
        static const lf_Real_t lfCalibFocal[2][26] = { { 
            4.502822196698936,
            4.500634324458742,
            4.4951283191498685,
            4.50736399489146,
            4.496450767736229,
            4.48772407787381,
            4.499286474858367,
            4.503893493907512,
            4.508217484459606,
            4.503258265542969,
            4.507659567762427,
            4.52180076444192,
            4.505375462836355,
            4.507442430915182,
            4.513034584465105,
            4.503266091095079,
            4.4946407918882825,
            4.487387137855685,
            4.496854509075178,
            4.51019036560641,
            4.4891035329980875,
            4.514573810135044,
            4.501089686241741,
            4.49224349817374,
            4.4990469230539745,
            4.510785478395456
        }, {
            4.4519324768809705,
            4.470035390332585,
            4.458533980296268,
            4.455256088492633,
            4.470342978585261,
            4.455294826826963,
            4.459627409328529,
            4.50023182014804,
            4.499978536969772,
            4.516403763587318,
            4.531876609994132,
            4.518055730125388,
            4.50509954837594,
            4.505032973634352,
            4.522707120141829,
            4.508635627709489,
            4.511071874246086,
            4.5061479192245875,
            4.51358597375525,
            4.47578673619304,
            4.472507443885495,
            4.462107300485725,
            4.521118361896103,
            4.493828446742224,
            4.4982630561345065,
            4.505291954293262
        } };

        /* Calibration data variables - Azimuth */
        static const lf_Real_t lfCalibAzimuth[2][26] = { {
            0.0,
            44.85959225075476,
            89.08214753428238,
            133.05935848424602,
            177.8503479012359,
            222.50308235140923,
            268.0724840933041,
            313.8242154582839,
            -0.5805897763960011,
            44.2629977063087,
            88.78398437394624,
            133.51596235819156,
            178.2093549719979,
            223.28626056398096,
            268.4631809049725,
            313.8487596762866,
            -0.7893908993061233,
            44.18429757436952,
            88.73823395732516,
            133.45903711986728,
            178.71043408705702,
            223.87949344799017,
            268.8789158987296,
            313.96389864255923,
            87.50842773474282,
            267.3046604634096
        }, {
            0.0,
            44.87939983340925,
            89.37719756311732,
            134.1892551703798,
            179.47099321473016,
            224.5268726633856,
            269.5418949879912,
            314.4439899320529,
            -0.2876846697488904,
            44.56802429642279,
            88.52537848421086,
            134.1453406875082,
            179.55301554093256,
            224.67880808616422,
            269.65001060857094,
            314.5000856855409,
            -0.019108869329540368,
            44.49197929869093,
            89.32719857587996,
            134.60908947704482,
            179.8986612605278,
            224.56947600799973,
            269.6275359466124,
            314.9717409007758,
            84.88265960121868,
            267.2673401418448
        } };

        /* Calibration data variables - Elevation */
        static const lf_Real_t lfCalibElevation[2][26] = { {
            55.21924351775274,
            55.24617579827175,
            54.741188207331,
            54.472635556704816,
            54.614780717910634,
            54.79687095995746,
            55.21972046932725,
            55.23322877845502,
            0.4456435396130725,
            0.13106053334377044,
            -0.10453393542972533,
            -0.3313859187625096,
            -0.11419392661011547,
            0.36675841753323835,
            0.4162104537387868,
            0.46169233347151706,
            -54.81122413993193,
            -55.28831513346112,
            -55.51572455526859,
            -55.26054720014196,
            -54.98034201075099,
            -54.97880819496333,
            -54.763545272472776,
            -54.624732839718995,
            -0.19689754356313624,
            0.15093958574014044
        }, {
            56.103286614236744,
            55.455353919701054,
            55.033007270048856,
            54.91601859571682,
            55.15474326773546,
            55.257931757188096,
            55.02453203068673,
            55.627578417059745,
            0.3927418697430173,
            -0.12206679163213612,
            -0.3754492047721772,
            -0.13168307607533272,
            -0.28218508899443306,
            0.09635977783601152,
            -0.05101547786068751,
            -0.06344590773909478,
            -55.030035833058164,
            -54.41317173617846,
            -55.16019128338719,
            -55.26916393548586,
            -54.820522327840344,
            -55.168300563946346,
            -55.00894973561034,
            -55.03285052074849,
            -0.3640072632233652,
            -0.05230365177921168
        } };

        /* Calibration data variables - Heading */
        static const lf_Real_t lfCalibHeading[2][26] = { {
            -0.7751150543214966,
            -0.2280920024130554,
            -0.45281360793704867,
            0.7942313249973154,
            0.6982199311269469,
            0.8376539544403259,
            0.13615777103004767,
            -0.8425902452108474,
            -0.7690861475199168,
            -0.5998428162062142,
            -0.12653716448871388,
            0.36966136161275226,
            0.2572103314107106,
            0.3027020739111558,
            0.43010067341046787,
            -0.09135711437646082,
            -0.7443462977766258,
            -1.442605925546065,
            -0.21361052695962746,
            0.5675034516388574,
            0.47961192114586954,
            0.23527476398755318,
            -0.3410296437110144,
            0.4025411194361878,
            0.07691374575139627,
            0.2785988062996896
        }, {
            -0.9167198186471318,
            0.7735821144870754,
            0.10269350191833686,
            0.1935688831556849,
            -0.4122844635895488,
            -0.5913335682739562,
            0.19776288964367456,
            -0.6482685815290649,
            -0.3910480198360587,
            -0.35741816238235397,
            0.6418393495785493,
            0.26426408808087026,
            -0.10827773965280056,
            0.25401210692686266,
            -0.3705757082715167,
            0.20894397032381565,
            -0.07456639835681231,
            -0.105772376879302,
            -0.4888589026374138,
            -0.1345886930188826,
            -0.09634773797776656,
            0.5480452116423489,
            -0.16418375482128247,
            -0.23021938841492798,
            1.6853592572972302,
            0.04255239605108342
        } };

        /* Calibration data variables - Pixel size */
        static const lf_Real_t lfCalibPixelSize[2][26] = { {
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2
        }, {
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2,
            2.2
        } };

        /* Calibration data variables - X-position of center on sensor */
        static const lf_Real_t lfCalibPx0[2][26] = { {
            1485.194280937914,
            1475.6720061536391,
            1482.9032890785415,
            1486.6818682355859,
            1484.4140599062746,
            1479.2973381437148,
            1468.7795699891303,
            1480.4014674936402,
            1263.8849164543408,
            1257.9982114852885,
            1279.275906317441,
            1276.6946597250717,
            1271.823302221777,
            1263.9371477585487,
            1264.9124735784615,
            1269.0294343461987,
            1483.5013560680127,
            1477.297120422039,
            1478.0985188479233,
            1483.7503208727258,
            1488.0389354024433,
            1475.3891753804915,
            1484.038559738966,
            1489.509974987309,
            1249.6893359465248,
            1256.2904089533238
        }, {
            1450.3641334451327,
            1463.1749916238293,
            1104.6962652898455,
            1472.0210587829852,
            1461.4857184800287,
            1469.9442258045385,
            1492.4654441956795,
            1455.4637078775238,
            1267.9859890043947,
            1278.5951850669103,
            1274.9135494651832,
            1286.6059797750252,
            1265.7428475236707,
            1260.7902895971145,
            1269.9169783403627,
            1271.2980507389339,
            1486.0638404921256,
            1484.0440917852334,
            1473.929622843207,
            1469.1212020558653,
            1460.411269833683,
            1462.2633343049583,
            1492.3236158787508,
            1490.2546963497764,
            1253.0011854339277,
            1287.6740945206195
        } };

        /* Calibration data variables - Y-position of center on sensor */
        static const lf_Real_t lfCalibPy0[2][26] = { {
            996.9530389740116,
            977.9980008136647,
            988.3059506411039,
            979.0261947426719,
            983.3452660844322,
            982.681871413751,
            1004.3726566879831,
            973.9459091451715,
            958.7668601641257,
            965.0362514468385,
            974.7702088821859,
            973.9759037435593,
            978.2979641580524,
            941.4505768949923,
            994.0552705828267,
            965.123491721357,
            973.4289890428037,
            1010.2274905984633,
            984.2812669205775,
            996.5953423552079,
            972.1221541849468,
            998.5747008744295,
            980.4828823696162,
            998.7893451976123,
            957.767651778992,
            946.7757824385
        }, {
            967.0874269616846,
            949.4337229811431,
            947.661322156474,
            949.8646822767935,
            959.6130021028374,
            949.8162823653196,
            965.1904656781877,
            967.6482147079903,
            980.8741473174367,
            958.7133525670487,
            967.7021518144829,
            965.0590460310414,
            983.6113169158886,
            955.8193889573034,
            995.9020059418797,
            918.4596402399079,
            979.0747737415893,
            1001.6249527167075,
            983.7903208930293,
            982.7942952547096,
            967.0717209717926,
            972.1030580887265,
            979.501058816599,
            999.4186859969209,
            981.528626069322,
            960.1104402328956
        } };

        /* Calibration data variables - Roll */
        static const lf_Real_t lfCalibRoll[2][26] = { {
            91.2850453141553,
            91.37401538517528,
            90.62601654715588,
            90.32615575146706,
            90.13666184013307,
            90.19077135996726,
            89.89360392186683,
            89.52256687030287,
            90.94386362046363,
            90.99337671732187,
            90.60848379511604,
            90.1248791908665,
            90.34414409196047,
            90.30398964641383,
            90.34633593824175,
            90.78548371676928,
            -89.38627140278855,
            -88.17674087283507,
            -89.05055705669496,
            -89.75796589012461,
            -90.08327925868052,
            -90.09959856700833,
            -89.34339645932234,
            -89.8567792868438,
            90.61902812663479,
            -89.54282400658062
        }, {
            90.17651509309106,
            91.65049281705215,
            -89.49615933235744,
            90.36522063786171,
            90.48077231523696,
            90.20843573198678,
            90.9512874472609,
            89.89873444016695,
            90.79055119072241,
            90.8859957603677,
            90.4835628042307,
            90.40438509409296,
            90.74836271906204,
            90.71406712978077,
            90.31488416617803,
            90.61697784363975,
            -89.58833010352211,
            -89.03682328031078,
            -88.9999552641236,
            -89.01796852391351,
            -89.77006188417668,
            -90.01130100850584,
            -90.09395159536491,
            -89.50827018660631,
            90.63512935804864,
            -89.58415910249157
        } };

        /* Calibration data variables - Panorama width */
        static const lf_Real_t lfCalibPanWidth[2][26] = { {
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268
        }, {
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268,
            14268
        } };

        /* Calibration data variables - Panorama height */
        static const lf_Real_t lfCalibPanHeight[2][26] = { {
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135
        }, {
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135,
            7135
        } };

        /* Calibration data variables - Tile x-position in panorama */
        static const lf_Real_t lfCalibXPosition[2][26] = { {
            5570,
            7350,
            9153,
            10928,
            12627,
            133,
            1937,
            3769,
            6061,
            7847,
            9643,
            11443,
            13209,
            700,
            2543,
            4288,
            5559,
            7343,
            9151,
            10964,
            12718,
            240,
            2028,
            3815,
            9583,
            2484
        }, {
            5612,
            7387,
            9174,
            10969,
            12730,
            264,
            2065,
            3860,
            6107,
            7865,
            9662,
            11453,
            13246,
            759,
            2560,
            4285,
            5600,
            7385,
            9175,
            10968,
            12741,
            255,
            2059,
            3837,
            9562,
            2459
        } };

        /* Calibration data variables - Tile y-position in panorama */
        static const lf_Real_t lfCalibYPosition[2][26] = { {
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            2294,
            2311,
            2304,
            2320,
            2310,
            2297,
            2296,
            2290,
            4545,
            4542,
            4563,
            4566,
            4560,
            4551,
            4550,
            4545,
            2330,
            2255
        }, {
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            2291,
            2307,
            2323,
            2302,
            2321,
            2310,
            2313,
            2309,
            4539,
            4506,
            4529,
            4523,
            4509,
            4523,
            4551,
            4536,
            2333,
            2282
        } };

        /* Calibration data variables - Sensor width */
        static const lf_Real_t lfCalibSensorWidth[2][26] = { {
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592
        }, {
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592,
            2592
        } };

        /* Calibration data variables - Sensor width */
        static const lf_Real_t lfCalibSensorHeight[2][26] = { {
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936
        }, {
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936,
            1936
        } };

        /* Switch on calibration value */
        if ( strcmp( lfData, LF_EYESIS4PI_FOCAL ) == 0 ) {

            /* Return calibration data */
            return( lfCalibFocal[lfIndex][lfChannel] );

        } else if ( strcmp( lfData, LF_EYESIS4PI_AZIMUTH ) == 0 ) {

            /* Return calibration data */
            return( lfCalibAzimuth[lfIndex][lfChannel] * LF_DEG2RAD );

        } else if ( strcmp( lfData, LF_EYESIS4PI_ELEVATION ) == 0 ) {

            /* Return calibration data */
            return( lfCalibElevation[lfIndex][lfChannel] * LF_DEG2RAD );

        } else if ( strcmp( lfData, LF_EYESIS4PI_HEADING ) == 0 ) {

            /* Return calibration data */
            return( lfCalibHeading[lfIndex][lfChannel] * LF_DEG2RAD );

        } else if ( strcmp( lfData, LF_EYESIS4PI_PIXELSIZE ) == 0 ) {

            /* Return calibration data */
            return( lfCalibPixelSize[lfIndex][lfChannel] * lf_Real_s( 0.001 ) );

        } else if ( strcmp( lfData, LF_EYESIS4PI_PX0 ) == 0 ) {

            /* Return calibration data */
            return( lfCalibPx0[lfIndex][lfChannel] );

        } else if ( strcmp( lfData, LF_EYESIS4PI_PY0 ) == 0 ) {

            /* Return calibration data */
            return( lfCalibPy0[lfIndex][lfChannel] );

        } else if ( strcmp( lfData, LF_EYESIS4PI_ROLL ) == 0 ) {

            /* Return calibration data */
            return( lfCalibRoll[lfIndex][lfChannel] * LF_DEG2RAD );

        } else if ( strcmp( lfData, LF_EYESIS4PI_PANWIDTH ) == 0 ) {

            /* Return calibration data */
            return( lfCalibPanWidth[lfIndex][lfChannel] );

        } else if ( strcmp( lfData, LF_EYESIS4PI_PANHEIGHT ) == 0 ) {

            /* Return calibration data */
            return( lfCalibPanHeight[lfIndex][lfChannel] );

        } else if ( strcmp( lfData, LF_EYESIS4PI_XPOSITION ) == 0 ) {

            /* Return calibration data */
            return( lfCalibXPosition[lfIndex][lfChannel] );

        } else if ( strcmp( lfData, LF_EYESIS4PI_YPOSITION ) == 0 ) {

            /* Return calibration data */
            return( lfCalibYPosition[lfIndex][lfChannel] );

        } else if ( strcmp( lfData, LF_EYESIS4PI_SENWIDTH ) == 0 ) {

            /* Return calibration data */
            return( lfCalibSensorWidth[lfIndex][lfChannel] );

        } else if ( strcmp( lfData, LF_EYESIS4PI_SENHEIGHT ) == 0 ) {

            /* Return calibration data */
            return( lfCalibSensorHeight[lfIndex][lfChannel] );

        }

        /* Display message */
        fprintf( stdout, "Error : Calibration data not found\n" );

        /* Return null value */
        return( lf_Real_s( 0.0 ) );

    }
